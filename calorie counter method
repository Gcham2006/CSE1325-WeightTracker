import java.util.Scanner;
import java.io.*;
import java.util.ArrayList;

class person{
	private String name;
	private int age;
	private char gender;
	private int height;
	private double weight;
	
	public person(String name,int age,char gender,int height,double weight) {
		this.name = name;
		this.age = age;
		this.gender = gender;
		this.height = height;
		this.weight = weight;
	}
	
	public String getName() {
		return name;
	}
	public int getAge() {
		return age;
	}
	public char getGender() {
		return gender;
	}
	public int getHeight() {
		return height;
	}
	public double getWeight() {
		return weight;
	}
	
	public void setName(String name) {
		this.name = name;
	}
	public void setAge(int age) {
		this.age = age;
	}
	public void setGender(char gender) {
		this.gender = gender;
	}
	public void setHeight(int height) {
		this.height = height;
	}
	public void setWeight(double weight) {
		this.weight = weight;
	}
	
	
	
	
	public void displayInfo() {
		System.out.println("Name: "+name+"\nAge: "+age+"\nGender: "+gender+"\nHeight(cm): "+height+"\nWeight(kg): "+weight);
	}
}

class member extends person{
	private String ID;
	
	public member(String name,int age,char gender,int height,double weight,String ID) {
		super(name,age,gender,height,weight);
		this.ID = ID;
	}
	
	public String getID() {
		return ID;
	}
	
	public void setID(String ID) {
		this.ID = ID;
	}
	
	@Override
	public void displayInfo() {
		System.out.println("Name: "+getName()+"\nAge: "+getAge()+"\nGender: "+getGender()+"\nHeight(cm): "+getHeight()+"\nWeight(Kg): "+getWeight()+"\nID:"+ID);
	}
}

 enum activityLevel {
	 	SEDENTARY(1.2),
	    LIGHTLY_ACTIVE(1.375),
	    MODERATELY_ACTIVE(1.55),
	    VERY_ACTIVE(1.725),
	    EXTRA_ACTIVE(1.9);

	    private final double factor;

	    private activityLevel(double factor) {
	        this.factor = factor;
	    }

	    public double getFactor() {
	        return factor;
	    }
}
 


 enum Goal {
	    MAINTAIN(0),
	    LOSE(-400),
	    GAIN(400);

	    private final int calorie;

	    private Goal(int calorie) {
	        this.calorie = calorie;
	    }

	    public int getCalorie() {
	        return calorie;
	    }
	} 


public class calorie_counter {
    // list to store the profiles created in the app
    private ArrayList<person> members = new ArrayList<>();

    public void menu(Scanner sc) {
        while (true) {
            System.out.println("\n\t\t--- Calorie Counter Menu ---");
            System.out.println("1. Create a profile");
            System.out.println("2. Remove a profile");
            System.out.println("3. Track your weight (Placeholder)");
            System.out.println("4. Calculate your BMI (Placeholder)");
            System.out.println("5. Calculate daily calories");
            System.out.println("6. Calculate your macros (Placeholder)");
            System.out.println("7. Logout");
            System.out.print("Enter choice: ");

            int choice;
            try {
                choice = Integer.parseInt(sc.nextLine());
            } catch (NumberFormatException e) {
                System.out.println("Invalid input. Enter a number.");
                continue;
            }

            switch (choice) {
                case 1:
                    createProfile(sc);
                    break;
                case 2:
                    // You can add remove logic here later
                    System.out.println("Remove profile feature coming soon.");
                    break;
                case 3:
                case 4:
                    System.out.println("Feature under construction.");
                    break;
                case 5:
                    calculateCalories(members, sc);
                    break;
                case 6:
                    System.out.println("Macro calculation coming soon.");
                    break;
                case 7:
                    System.out.println("Logging out...");
                    return; // Returns to the Main Login screen
                default:
                    System.out.println("Invalid choice.");
            }
        }
    }

    public void createProfile(Scanner sc) {
        try {
            System.out.print("Enter name: ");
            String name = sc.nextLine();
            
            System.out.print("Enter age: ");
            int age = Integer.parseInt(sc.nextLine());
            
            System.out.print("Gender (M/F): ");
            char gender = sc.nextLine().toUpperCase().charAt(0);
            
            System.out.print("Height (cm): ");
            int height = Integer.parseInt(sc.nextLine());
            
            System.out.print("Weight (kg): ");
            double weight = Double.parseDouble(sc.nextLine());
            
            System.out.print("Enter a unique Member ID: ");
            String id = sc.nextLine();

            // Create the member object
            member newMember = new member(name, age, gender, height, weight, id);
            
            // Add to the list
            members.add(newMember);
            System.out.println("Profile created successfully for " + name + "!");
            
        } catch (Exception e) {
            System.out.println("Error creating profile. Please enter valid numbers for age/height/weight.");
        }
    }

    public void calculateCalories(ArrayList<person> members, Scanner sc) {
        if (members.isEmpty()) {
            System.out.println("No profiles found. Please create a profile first.");
            return;
        }

        System.out.print("Enter ID of member to calculate BMR for: ");
        String id = sc.nextLine();
        boolean found = false;

        for (person p : members) {
            // We need to cast person back to member to access getID()
            if (p instanceof member) {
                member m = (member) p;
                if (m.getID().equals(id)) {
                    found = true;
                    double bmr;
                    
                    // Mifflin-St Jeor Equation
                    if (m.getGender() == 'M') {
                        bmr = (m.getWeight() * 10) + (m.getHeight() * 6.25) - (m.getAge() * 5) + 5;
                    } else {
                        bmr = (m.getWeight() * 10) + (m.getHeight() * 6.25) - (m.getAge() * 5) - 161;
                    }

                    System.out.println("\nSelect Activity Level:");
                    System.out.println("1. Sedentary (little or no exercise)");
                    System.out.println("2. Lightly active (light exercise 1-3 days/week)");
                    System.out.println("3. Moderately active (moderate exercise 3-5 days/week)");
                    System.out.println("4. Very active (hard exercise 6-7 days/week)");
                    System.out.println("5. Extra active (very hard exercise & physical job)");
                    System.out.print("Choice: ");
                    
                    int actChoice = Integer.parseInt(sc.nextLine());
                    activityLevel activity;
                    
                    switch (actChoice) {
                        case 1: activity = activityLevel.SEDENTARY; break;
                        case 2: activity = activityLevel.LIGHTLY_ACTIVE; break;
                        case 3: activity = activityLevel.MODERATELY_ACTIVE; break;
                        case 4: activity = activityLevel.VERY_ACTIVE; break;
                        case 5: activity = activityLevel.EXTRA_ACTIVE; break;
                        default: activity = activityLevel.SEDENTARY;
                    }

                    System.out.println("\nSelect Goal:");
                    System.out.println("1. Maintain Weight");
                    System.out.println("2. Lose Weight");
                    System.out.println("3. Gain Weight");
                    System.out.print("Choice: ");
                    
                    int goalChoice = Integer.parseInt(sc.nextLine());
                    Goal goal;
                    
                    switch (goalChoice) {
                        case 1: goal = Goal.MAINTAIN; break;
                        case 2: goal = Goal.LOSE; break;
                        case 3: goal = Goal.GAIN; break;
                        default: goal = Goal.MAINTAIN;
                    }

                    double totalCalories = (bmr * activity.getFactor()) + goal.getCalorie();
                    System.out.println("\n------------------------------------------------");
                    System.out.printf("BMR: %.2f\n", bmr);
                    System.out.printf("Recommended Daily Intake: %.2f calories\n", totalCalories);
                    System.out.println("------------------------------------------------");
                }
            }
        }
        if (!found) {
            System.out.println("Member with ID " + id + " not found.");
        }
    }
}
